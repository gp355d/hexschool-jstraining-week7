(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18af4396"],{8418:function(t,e,a){"use strict";var o=a("c04e"),n=a("9bf2"),s=a("5c6c");t.exports=function(t,e,a){var i=o(e);i in t?n.f(t,i,s(0,a)):t[i]=a}},"99af":function(t,e,a){"use strict";var o=a("23e7"),n=a("d039"),s=a("e8b5"),i=a("861d"),l=a("7b0b"),d=a("50c4"),c=a("8418"),r=a("65f0"),u=a("1dde"),p=a("b622"),m=a("2d00"),v=p("isConcatSpreadable"),C=9007199254740991,h="Maximum allowed index exceeded",b=m>=51||!n((function(){var t=[];return t[v]=!1,t.concat()[0]!==t})),f=u("concat"),_=function(t){if(!i(t))return!1;var e=t[v];return void 0!==e?!!e:s(t)},g=!b||!f;o({target:"Array",proto:!0,forced:g},{concat:function(t){var e,a,o,n,s,i=l(this),u=r(i,0),p=0;for(e=-1,o=arguments.length;e<o;e++)if(s=-1===e?i:arguments[e],_(s)){if(n=d(s.length),p+n>C)throw TypeError(h);for(a=0;a<n;a++,p++)a in s&&c(u,p,s[a])}else{if(p>=C)throw TypeError(h);c(u,p++,s)}return u.length=p,u}})},d0a3:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("h2",[t._v("優惠卷列表")]),a("div",{staticClass:"text-right mt-4"},[a("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.openCouponModal("new")}}},[t._v(" 建立新的優惠券 ")])]),a("table",{staticClass:"table mt-4"},[t._m(0),a("tbody",t._l(t.coupons,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.title))]),a("td",[t._v(t._s(e.percent))]),a("td",[t._v(t._s(e.deadline.datetime))]),a("td",[e.enabled?a("span",{staticClass:"text-success"},[t._v("啟用")]):a("span",{staticClass:"text-muted"},[t._v("未起用")])]),a("td",[a("div",{staticClass:"btn-group"},[a("button",{staticClass:"btn btn-outline-primary btn-sm",on:{click:function(a){return t.openCouponModal("edit",e)}}},[t._v(" 編輯 ")]),a("button",{staticClass:"btn btn-outline-danger btn-sm",on:{click:function(a){return t.openCouponModal("delete",e)}}},[t._v(" 刪除 ")])])])])})),0)]),a("div",{staticClass:"modal fade",attrs:{id:"couponModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(1),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"coupontitle"}},[t._v("標題")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.title,expression:"tempCoupon.title"}],staticClass:"form-control",attrs:{id:"coupontitle",type:"text",placeholder:"請輸入標題"},domProps:{value:t.tempCoupon.title},on:{input:function(e){e.target.composing||t.$set(t.tempCoupon,"title",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"couponcode"}},[t._v("優惠碼")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.code,expression:"tempCoupon.code"}],staticClass:"form-control",attrs:{id:"couponcode",type:"text",placeholder:"請輸入優惠碼"},domProps:{value:t.tempCoupon.code},on:{input:function(e){e.target.composing||t.$set(t.tempCoupon,"code",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"deadline"}},[t._v("到期日")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.deadline,expression:"deadline"}],staticClass:"form-control",attrs:{type:"date",id:"deadline"},domProps:{value:t.deadline},on:{input:function(e){e.target.composing||(t.deadline=e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"timelimit"}},[t._v("到期時間")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.timelimit,expression:"timelimit"}],staticClass:"form-control",attrs:{type:"time",step:"1",id:"timelimit"},domProps:{value:t.timelimit},on:{input:function(e){e.target.composing||(t.timelimit=e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"discountpercentage"}},[t._v("折扣百分比")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.percent,expression:"tempCoupon.percent"}],staticClass:"form-control",attrs:{id:"discountpercentage",type:"number",placeholder:"請輸入折扣數量"},domProps:{value:t.tempCoupon.percent},on:{input:function(e){e.target.composing||t.$set(t.tempCoupon,"percent",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.enabled,expression:"tempCoupon.enabled"}],staticClass:"form-check-input",attrs:{id:"enabled",type:"checkbox"},domProps:{checked:Array.isArray(t.tempCoupon.enabled)?t._i(t.tempCoupon.enabled,null)>-1:t.tempCoupon.enabled},on:{change:function(e){var a=t.tempCoupon.enabled,o=e.target,n=!!o.checked;if(Array.isArray(a)){var s=null,i=t._i(a,s);o.checked?i<0&&t.$set(t.tempCoupon,"enabled",a.concat([s])):i>-1&&t.$set(t.tempCoupon,"enabled",a.slice(0,i).concat(a.slice(i+1)))}else t.$set(t.tempCoupon,"enabled",n)}}}),a("label",{staticClass:"form-check-label",attrs:{for:"enabled"}},[t._v("是否啟用")])])])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" 關閉 ")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.updateCoupon}},[t._v(" "+t._s("new"===t.status?"新增優惠卷":"更新優惠券")+" ")])])])])]),a("div",{staticClass:"modal fade",attrs:{id:"delCouponModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content border-0"},[t._m(2),a("div",{staticClass:"modal-body"},[t._v(" 是否刪除 "),a("strong",{staticClass:"text-danger"},[t._v(t._s(t.tempCoupon.title))]),t._v(" 優惠券(刪除後將無法恢復)。 ")]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" 取消 ")]),a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:t.deleteCoupon}},[t._v(" 確認刪除 ")])])])])])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("名稱")]),a("th",[t._v("折扣百分比")]),a("th",[t._v("到期日")]),a("th",[t._v("是否啟用")]),a("th",[t._v("編輯")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v(" 建立優惠券 ")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header bg-danger text-white"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[a("span",[t._v("刪除優惠卷")])]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],s=(a("99af"),a("ac1f"),a("1276"),{data:function(){return{coupons:{},tempCoupon:{title:"",enabled:!1,percent:100,deadline_at:0,code:""},deadline:"",timelimit:"",status:"",isLoading:!1,uuid:"d52eae5f-b113-4dd1-81cc-46bd383ac57a"}},created:function(){this.getCoupons()},methods:{openCouponModal:function(t,e){switch(this.status=t,t){case"new":this.tempCoupon={},$("#couponModal").modal("show");break;case"edit":this.tempCoupon=Object.assign({},e);var a=this.tempCoupon.deadline.datetime.split(" ");this.deadline=a[0],this.timelimit=a[1],$("#couponModal").modal("show");break;case"delete":this.tempCoupon=Object.assign({},e),$("#delCouponModal").modal("show");break;default:break}},getCoupons:function(){var t=this,e="".concat("https://course-ec-api.hexschool.io/api","/").concat(this.uuid,"/admin/ec/coupons");this.$http.get(e).then((function(e){t.coupons=e.data.data}))},updateCoupon:function(){var t=this,e="".concat("https://course-ec-api.hexschool.io/api","/").concat(this.uuid,"/admin/ec/coupon"),a="";"new"===this.status?a="post":(e="".concat("https://course-ec-api.hexschool.io/api","/").concat(this.uuid,"/admin/ec/coupon/").concat(this.tempCoupon.id),a="patch"),this.tempCoupon.deadline_at="".concat(this.deadline," ").concat(this.timelimit),console.log(this.tempCoupon),this.$http[a](e,this.tempCoupon).then((function(e){$("#couponModal").modal("hide"),200===e.status?(alert("成功"),t.getCoupons()):alert("失敗")}))},deleteCoupon:function(){var t=this,e="".concat("https://course-ec-api.hexschool.io/api","/").concat(this.uuid,"/admin/ec/coupon/").concat(this.tempCoupon.id);this.$http.delete(e).then((function(e){$("#delCouponModal").modal("hide"),200===e.status?(alert("成功"),t.getCoupons()):alert("失敗")}))}}}),i=s,l=a("2877"),d=Object(l["a"])(i,o,n,!1,null,null,null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-18af4396.e4e0c456.js.map